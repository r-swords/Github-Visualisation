{"ast":null,"code":"import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nvar _excluded = [\"visibility\"];\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { useAnchor } from '../hooks/useAnchor';\nimport useLatestWhen from '../hooks/useLatestWhen';\nimport usePortalElement from '../hooks/usePortalElement';\nimport usePrevious from '../hooks/usePrevious'; //\n\nimport useChartContext from '../utils/chartContext';\nimport TooltipRenderer from './TooltipRenderer';\nimport useRect from '../hooks/useRect';\nimport { useSpring } from '../hooks/useSpring'; //\n\nexport function defaultTooltip(options) {\n  var _options$align, _options$alignPriorit, _options$padding, _options$arrowPadding, _options$render;\n\n  if (options === void 0) {\n    options = {};\n  }\n\n  if (options === true) {\n    options = {\n      show: true\n    };\n  } else if (options === false) {\n    options = {\n      show: false\n    };\n  }\n\n  return _extends({\n    show: true\n  }, options, {\n    align: (_options$align = options.align) != null ? _options$align : 'auto',\n    alignPriority: (_options$alignPriorit = options.alignPriority) != null ? _options$alignPriorit : ['right', 'topRight', 'bottomRight', 'left', 'topLeft', 'bottomLeft', 'top', 'bottom'],\n    padding: (_options$padding = options.padding) != null ? _options$padding : 5,\n    arrowPadding: (_options$arrowPadding = options.arrowPadding) != null ? _options$arrowPadding : 7,\n    // anchor: options.anchor ?? 'closest',\n    render: (_options$render = options.render) != null ? _options$render : TooltipRenderer\n  });\n}\nexport default function Tooltip() {\n  var _secondaryAxes$find, _useLatestWhen;\n\n  var _useChartContext = useChartContext(),\n      focusedDatumState = _useChartContext.focusedDatumState,\n      getOptions = _useChartContext.getOptions,\n      primaryAxis = _useChartContext.primaryAxis,\n      secondaryAxes = _useChartContext.secondaryAxes,\n      getDatumStatusStyle = _useChartContext.getDatumStatusStyle,\n      svgRef = _useChartContext.svgRef;\n\n  var focusedDatum = focusedDatumState[0];\n  var latestFocusedDatum = useLatestWhen(focusedDatum, !!focusedDatum);\n  var secondaryAxis = (_secondaryAxes$find = secondaryAxes.find(function (d) {\n    return d.id === (latestFocusedDatum == null ? void 0 : latestFocusedDatum.secondaryAxisId);\n  })) != null ? _secondaryAxes$find : secondaryAxes[0];\n  var portalEl = usePortalElement();\n\n  var _React$useState = React.useState(),\n      tooltipEl = _React$useState[0],\n      setTooltipEl = _React$useState[1];\n\n  var svgRect = useRect(svgRef.current, !!(focusedDatum != null && focusedDatum.element));\n  var anchorEl = React.useMemo(function () {\n    var _latestFocusedDatum$e, _latestFocusedDatum$e2, _anchorRect$left, _anchorRect$top, _anchorRect$width, _anchorRect$height;\n\n    var anchorRect = (_latestFocusedDatum$e = latestFocusedDatum == null ? void 0 : (_latestFocusedDatum$e2 = latestFocusedDatum.element) == null ? void 0 : _latestFocusedDatum$e2.getBoundingClientRect()) != null ? _latestFocusedDatum$e : null;\n\n    if (!anchorRect) {\n      return null;\n    }\n\n    if (!svgRect) return;\n    var translateX = (_anchorRect$left = anchorRect.left) != null ? _anchorRect$left : 0;\n    var translateY = (_anchorRect$top = anchorRect.top) != null ? _anchorRect$top : 0;\n    var width = (_anchorRect$width = anchorRect.width) != null ? _anchorRect$width : 0;\n    var height = (_anchorRect$height = anchorRect.height) != null ? _anchorRect$height : 0;\n    var box = {\n      x: translateY,\n      y: translateX,\n      top: translateY,\n      left: translateX,\n      bottom: translateY + width,\n      right: translateX + height,\n      width: width,\n      height: height,\n      toJSON: function toJSON() {\n        return {};\n      }\n    };\n\n    box.toJSON = function () {\n      return box;\n    };\n\n    return {\n      getBoundingClientRect: function getBoundingClientRect() {\n        return box;\n      }\n    };\n  }, [latestFocusedDatum == null ? void 0 : latestFocusedDatum.element, svgRect]);\n  var anchor = useAnchor({\n    show: !!focusedDatum,\n    portalEl: portalEl,\n    anchorEl: anchorEl,\n    tooltipEl: tooltipEl,\n    side: ['right', 'left', 'top', 'bottom']\n  });\n  var previousAnchor = usePrevious(anchor);\n  var latestStableAnchor = (_useLatestWhen = useLatestWhen(anchor, !!anchor.fit)) != null ? _useLatestWhen : anchor;\n\n  var _latestStableAnchor$s = latestStableAnchor.style,\n      visibility = _latestStableAnchor$s.visibility,\n      anchorStyle = _objectWithoutPropertiesLoose(_latestStableAnchor$s, _excluded);\n\n  var tooltipRef = React.useRef(null);\n  var immediate = Number.isNaN(previousAnchor == null ? void 0 : previousAnchor.style.left);\n  var tooltipXSpring = useSpring(anchorStyle.left || 0, [1, 210, 30], function () {\n    if (tooltipRef.current) {\n      tooltipRef.current.style.transform = \"translate(\" + tooltipXSpring.x() + \"px, \" + tooltipYSpring.x() + \"px)\";\n    }\n  }, immediate);\n  var tooltipYSpring = useSpring(anchorStyle.top || 0, [1, 210, 30], function () {\n    if (tooltipRef.current) {\n      tooltipRef.current.style.transform = \"translate(\" + tooltipXSpring.x() + \"px, \" + tooltipYSpring.x() + \"px)\";\n    }\n  }, immediate); // const springProps = useSpring({\n  //   ...anchorStyle,\n  //   left: anchorStyle.left || 0,\n  //   top: anchorStyle.top || 0,\n  //   config: { mass: 1, tension: 210, friction: 30 },\n  //   immediate: key => {\n  //     if (['left', 'top'].includes(key)) {\n  //       return Number.isNaN(previousAnchor?.style.left)\n  //     }\n  //     return false\n  //   },\n  // })\n\n  var show = getOptions().tooltip.show;\n  var latestFit = useLatestWhen(anchor.fit, !!anchor.fit);\n  return show && portalEl ? /*#__PURE__*/ReactDOM.createPortal( /*#__PURE__*/React.createElement(\"div\", {\n    ref: tooltipRef,\n    style: {\n      position: anchorStyle.position,\n      opacity: !!focusedDatum ? 1 : 0,\n      transition: 'opacity .3s ease'\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    ref: function ref(el) {\n      return setTooltipEl(el);\n    },\n    style: _extends({\n      fontFamily: 'sans-serif'\n    }, (latestFit == null ? void 0 : latestFit.startKey) === 'left' ? {\n      padding: '0 10px'\n    } : {\n      padding: '10px 0'\n    })\n  }, getOptions().tooltip.render({\n    getOptions: getOptions,\n    focusedDatum: latestFocusedDatum,\n    primaryAxis: primaryAxis,\n    secondaryAxes: secondaryAxes,\n    secondaryAxis: secondaryAxis,\n    getDatumStyle: function getDatumStyle(datum) {\n      return getDatumStatusStyle(datum, focusedDatum);\n    },\n    anchor: anchor\n  }))), portalEl) : null;\n}","map":{"version":3,"sources":["/home/ralph1/Documents/3rd_year/software_eng/react/github_visaulisation/node_modules/react-charts/es/components/Tooltip.js"],"names":["_objectWithoutPropertiesLoose","_extends","_excluded","React","ReactDOM","useAnchor","useLatestWhen","usePortalElement","usePrevious","useChartContext","TooltipRenderer","useRect","useSpring","defaultTooltip","options","_options$align","_options$alignPriorit","_options$padding","_options$arrowPadding","_options$render","show","align","alignPriority","padding","arrowPadding","render","Tooltip","_secondaryAxes$find","_useLatestWhen","_useChartContext","focusedDatumState","getOptions","primaryAxis","secondaryAxes","getDatumStatusStyle","svgRef","focusedDatum","latestFocusedDatum","secondaryAxis","find","d","id","secondaryAxisId","portalEl","_React$useState","useState","tooltipEl","setTooltipEl","svgRect","current","element","anchorEl","useMemo","_latestFocusedDatum$e","_latestFocusedDatum$e2","_anchorRect$left","_anchorRect$top","_anchorRect$width","_anchorRect$height","anchorRect","getBoundingClientRect","translateX","left","translateY","top","width","height","box","x","y","bottom","right","toJSON","anchor","side","previousAnchor","latestStableAnchor","fit","_latestStableAnchor$s","style","visibility","anchorStyle","tooltipRef","useRef","immediate","Number","isNaN","tooltipXSpring","transform","tooltipYSpring","tooltip","latestFit","createPortal","createElement","ref","position","opacity","transition","el","fontFamily","startKey","getDatumStyle","datum"],"mappings":"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","sourcesContent":["import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nvar _excluded = [\"visibility\"];\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { useAnchor } from '../hooks/useAnchor';\nimport useLatestWhen from '../hooks/useLatestWhen';\nimport usePortalElement from '../hooks/usePortalElement';\nimport usePrevious from '../hooks/usePrevious';\n//\nimport useChartContext from '../utils/chartContext';\nimport TooltipRenderer from './TooltipRenderer';\nimport useRect from '../hooks/useRect';\nimport { useSpring } from '../hooks/useSpring'; //\n\nexport function defaultTooltip(options) {\n  var _options$align, _options$alignPriorit, _options$padding, _options$arrowPadding, _options$render;\n\n  if (options === void 0) {\n    options = {};\n  }\n\n  if (options === true) {\n    options = {\n      show: true\n    };\n  } else if (options === false) {\n    options = {\n      show: false\n    };\n  }\n\n  return _extends({\n    show: true\n  }, options, {\n    align: (_options$align = options.align) != null ? _options$align : 'auto',\n    alignPriority: (_options$alignPriorit = options.alignPriority) != null ? _options$alignPriorit : ['right', 'topRight', 'bottomRight', 'left', 'topLeft', 'bottomLeft', 'top', 'bottom'],\n    padding: (_options$padding = options.padding) != null ? _options$padding : 5,\n    arrowPadding: (_options$arrowPadding = options.arrowPadding) != null ? _options$arrowPadding : 7,\n    // anchor: options.anchor ?? 'closest',\n    render: (_options$render = options.render) != null ? _options$render : TooltipRenderer\n  });\n}\nexport default function Tooltip() {\n  var _secondaryAxes$find, _useLatestWhen;\n\n  var _useChartContext = useChartContext(),\n      focusedDatumState = _useChartContext.focusedDatumState,\n      getOptions = _useChartContext.getOptions,\n      primaryAxis = _useChartContext.primaryAxis,\n      secondaryAxes = _useChartContext.secondaryAxes,\n      getDatumStatusStyle = _useChartContext.getDatumStatusStyle,\n      svgRef = _useChartContext.svgRef;\n\n  var focusedDatum = focusedDatumState[0];\n  var latestFocusedDatum = useLatestWhen(focusedDatum, !!focusedDatum);\n  var secondaryAxis = (_secondaryAxes$find = secondaryAxes.find(function (d) {\n    return d.id === (latestFocusedDatum == null ? void 0 : latestFocusedDatum.secondaryAxisId);\n  })) != null ? _secondaryAxes$find : secondaryAxes[0];\n  var portalEl = usePortalElement();\n\n  var _React$useState = React.useState(),\n      tooltipEl = _React$useState[0],\n      setTooltipEl = _React$useState[1];\n\n  var svgRect = useRect(svgRef.current, !!(focusedDatum != null && focusedDatum.element));\n  var anchorEl = React.useMemo(function () {\n    var _latestFocusedDatum$e, _latestFocusedDatum$e2, _anchorRect$left, _anchorRect$top, _anchorRect$width, _anchorRect$height;\n\n    var anchorRect = (_latestFocusedDatum$e = latestFocusedDatum == null ? void 0 : (_latestFocusedDatum$e2 = latestFocusedDatum.element) == null ? void 0 : _latestFocusedDatum$e2.getBoundingClientRect()) != null ? _latestFocusedDatum$e : null;\n\n    if (!anchorRect) {\n      return null;\n    }\n\n    if (!svgRect) return;\n    var translateX = (_anchorRect$left = anchorRect.left) != null ? _anchorRect$left : 0;\n    var translateY = (_anchorRect$top = anchorRect.top) != null ? _anchorRect$top : 0;\n    var width = (_anchorRect$width = anchorRect.width) != null ? _anchorRect$width : 0;\n    var height = (_anchorRect$height = anchorRect.height) != null ? _anchorRect$height : 0;\n    var box = {\n      x: translateY,\n      y: translateX,\n      top: translateY,\n      left: translateX,\n      bottom: translateY + width,\n      right: translateX + height,\n      width: width,\n      height: height,\n      toJSON: function toJSON() {\n        return {};\n      }\n    };\n\n    box.toJSON = function () {\n      return box;\n    };\n\n    return {\n      getBoundingClientRect: function getBoundingClientRect() {\n        return box;\n      }\n    };\n  }, [latestFocusedDatum == null ? void 0 : latestFocusedDatum.element, svgRect]);\n  var anchor = useAnchor({\n    show: !!focusedDatum,\n    portalEl: portalEl,\n    anchorEl: anchorEl,\n    tooltipEl: tooltipEl,\n    side: ['right', 'left', 'top', 'bottom']\n  });\n  var previousAnchor = usePrevious(anchor);\n  var latestStableAnchor = (_useLatestWhen = useLatestWhen(anchor, !!anchor.fit)) != null ? _useLatestWhen : anchor;\n\n  var _latestStableAnchor$s = latestStableAnchor.style,\n      visibility = _latestStableAnchor$s.visibility,\n      anchorStyle = _objectWithoutPropertiesLoose(_latestStableAnchor$s, _excluded);\n\n  var tooltipRef = React.useRef(null);\n  var immediate = Number.isNaN(previousAnchor == null ? void 0 : previousAnchor.style.left);\n  var tooltipXSpring = useSpring(anchorStyle.left || 0, [1, 210, 30], function () {\n    if (tooltipRef.current) {\n      tooltipRef.current.style.transform = \"translate(\" + tooltipXSpring.x() + \"px, \" + tooltipYSpring.x() + \"px)\";\n    }\n  }, immediate);\n  var tooltipYSpring = useSpring(anchorStyle.top || 0, [1, 210, 30], function () {\n    if (tooltipRef.current) {\n      tooltipRef.current.style.transform = \"translate(\" + tooltipXSpring.x() + \"px, \" + tooltipYSpring.x() + \"px)\";\n    }\n  }, immediate); // const springProps = useSpring({\n  //   ...anchorStyle,\n  //   left: anchorStyle.left || 0,\n  //   top: anchorStyle.top || 0,\n  //   config: { mass: 1, tension: 210, friction: 30 },\n  //   immediate: key => {\n  //     if (['left', 'top'].includes(key)) {\n  //       return Number.isNaN(previousAnchor?.style.left)\n  //     }\n  //     return false\n  //   },\n  // })\n\n  var show = getOptions().tooltip.show;\n  var latestFit = useLatestWhen(anchor.fit, !!anchor.fit);\n  return show && portalEl ? /*#__PURE__*/ReactDOM.createPortal( /*#__PURE__*/React.createElement(\"div\", {\n    ref: tooltipRef,\n    style: {\n      position: anchorStyle.position,\n      opacity: !!focusedDatum ? 1 : 0,\n      transition: 'opacity .3s ease'\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    ref: function ref(el) {\n      return setTooltipEl(el);\n    },\n    style: _extends({\n      fontFamily: 'sans-serif'\n    }, (latestFit == null ? void 0 : latestFit.startKey) === 'left' ? {\n      padding: '0 10px'\n    } : {\n      padding: '10px 0'\n    })\n  }, getOptions().tooltip.render({\n    getOptions: getOptions,\n    focusedDatum: latestFocusedDatum,\n    primaryAxis: primaryAxis,\n    secondaryAxes: secondaryAxes,\n    secondaryAxis: secondaryAxis,\n    getDatumStyle: function getDatumStyle(datum) {\n      return getDatumStatusStyle(datum, focusedDatum);\n    },\n    anchor: anchor\n  }))), portalEl) : null;\n}"]},"metadata":{},"sourceType":"module"}