{"ast":null,"code":"import _createForOfIteratorHelperLoose from \"@babel/runtime/helpers/esm/createForOfIteratorHelperLoose\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nvar _excluded = [\"options\", \"className\", \"style\"];\nimport { groups, sort, sum } from 'd3-array';\nimport React from 'react';\nimport useGetLatest from '../hooks/useGetLatest';\nimport useIsomorphicLayoutEffect from '../hooks/useIsomorphicLayoutEffect';\nimport Bar, { getPrimary } from '../seriesTypes/Bar';\nimport Line from '../seriesTypes/Line'; //\n\nimport { materializeStyles, getSeriesStatus, getDatumStatus } from '../utils/Utils';\nimport buildAxisLinear from '../utils/buildAxis.linear';\nimport { ChartContextProvider } from '../utils/chartContext';\nimport AxisLinear from './AxisLinear'; // import Brush from './Brush'\n\nimport Cursors from './Cursors';\nimport Tooltip, { defaultTooltip } from './Tooltip';\nimport Voronoi from './Voronoi'; //\n//\n\nvar defaultColorScheme = ['#0f83ab', '#faa43a', '#fd6868', '#53cfc9', '#a2d925', '#decf3f', '#734fe9', '#cd82ad', '#006d92', '#de7c00', '#f33232', '#3f9a80', '#53c200', '#d7af00', '#4c26c9', '#d44d99'];\nvar defaultPadding = 5;\n\nfunction defaultChartOptions(options) {\n  var _options$initialWidth, _options$initialHeigh, _options$getSeriesOrd, _options$interactionM, _options$showVoronoi, _options$defaultColor, _options$useIntersect, _options$intersection, _options$primaryCurso, _options$secondaryCur, _options$padding;\n\n  return _extends({}, options, {\n    initialWidth: (_options$initialWidth = options.initialWidth) != null ? _options$initialWidth : 300,\n    initialHeight: (_options$initialHeigh = options.initialHeight) != null ? _options$initialHeigh : 200,\n    getSeriesOrder: (_options$getSeriesOrd = options.getSeriesOrder) != null ? _options$getSeriesOrd : function (series) {\n      return series;\n    },\n    interactionMode: (_options$interactionM = options.interactionMode) != null ? _options$interactionM : 'primary',\n    showVoronoi: (_options$showVoronoi = options.showVoronoi) != null ? _options$showVoronoi : false,\n    defaultColors: (_options$defaultColor = options.defaultColors) != null ? _options$defaultColor : defaultColorScheme,\n    useIntersectionObserver: (_options$useIntersect = options.useIntersectionObserver) != null ? _options$useIntersect : true,\n    intersectionObserverRootMargin: (_options$intersection = options.intersectionObserverRootMargin) != null ? _options$intersection : '1000px',\n    primaryCursor: (_options$primaryCurso = options.primaryCursor) != null ? _options$primaryCurso : true,\n    secondaryCursor: (_options$secondaryCur = options.secondaryCursor) != null ? _options$secondaryCur : true,\n    padding: (_options$padding = options.padding) != null ? _options$padding : defaultPadding\n  });\n}\n\nexport function Chart(_ref) {\n  var userOptions = _ref.options,\n      className = _ref.className,\n      _ref$style = _ref.style,\n      style = _ref$style === void 0 ? {} : _ref$style,\n      rest = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  var options = defaultChartOptions(userOptions);\n\n  var _React$useState = React.useState(null),\n      chartElement = _React$useState[0],\n      setContainerElement = _React$useState[1];\n\n  var containerEl = chartElement == null ? void 0 : chartElement.parentElement;\n  var nearestScrollableParent = React.useMemo(function () {\n    var run = function run(el) {\n      if (!el) {\n        return null;\n      }\n\n      var grandParent = el.parentElement;\n\n      if (!grandParent) {\n        return null;\n      }\n\n      if (grandParent.scrollHeight > grandParent.clientHeight) {\n        var _window$getComputedSt = window.getComputedStyle(grandParent),\n            overflow = _window$getComputedSt.overflow;\n\n        if (overflow.includes('scroll') || overflow.includes('auto')) {\n          return grandParent;\n        }\n      }\n\n      return run(grandParent);\n    };\n\n    return run(containerEl);\n  }, [containerEl]);\n\n  var _React$useState2 = React.useState({\n    width: options.initialWidth,\n    height: options.initialHeight\n  }),\n      _React$useState2$ = _React$useState2[0],\n      width = _React$useState2$.width,\n      height = _React$useState2$.height,\n      setDims = _React$useState2[1];\n\n  useIsomorphicLayoutEffect(function () {\n    if (containerEl) {\n      var computed = window.getComputedStyle(containerEl);\n\n      if (!['relative', 'absolute', 'fixed'].includes(computed.position)) {\n        containerEl.style.position = 'relative';\n      }\n    }\n  }, [containerEl]);\n  React.useEffect(function () {\n    if (!containerEl) {\n      return;\n    }\n\n    var observer = new ResizeObserver(function () {\n      var rect = containerEl == null ? void 0 : containerEl.getBoundingClientRect();\n      var styles = window.getComputedStyle(containerEl);\n\n      if (rect) {\n        setDims({\n          width: rect.width - parseInt(styles.borderLeftWidth) - parseInt(styles.borderRightWidth),\n          height: rect.height - parseInt(styles.borderTopWidth) - parseInt(styles.borderBottomWidth)\n        });\n      }\n    });\n    observer.observe(containerEl);\n    return function () {\n      observer.unobserve(containerEl);\n    };\n  }, [containerEl]);\n\n  var _React$useState3 = React.useState(true),\n      isIntersecting = _React$useState3[0],\n      setIsIntersecting = _React$useState3[1];\n\n  React.useEffect(function () {\n    if (!containerEl || !options.useIntersectionObserver) return;\n    var observer = new IntersectionObserver(function (entries) {\n      for (var _iterator = _createForOfIteratorHelperLoose(entries), _step; !(_step = _iterator()).done;) {\n        var entry = _step.value;\n\n        if (entry.isIntersecting) {\n          setIsIntersecting(true);\n        } else {\n          setIsIntersecting(false);\n        }\n      }\n    }, {\n      root: nearestScrollableParent,\n      rootMargin: options.intersectionObserverRootMargin\n    });\n    observer.observe(containerEl);\n    return function () {\n      observer.unobserve(containerEl);\n    };\n  }, [containerEl, nearestScrollableParent, options.intersectionObserverRootMargin, options.useIntersectionObserver]);\n  return /*#__PURE__*/React.createElement(\"div\", _extends({\n    ref: setContainerElement\n  }, rest, {\n    className: \"ReactChart \" + (className || ''),\n    style: _extends({\n      fontFamily: 'sans-serif'\n    }, style, {\n      position: 'absolute',\n      width: width,\n      height: height\n    })\n  }), isIntersecting ? /*#__PURE__*/React.createElement(ChartInner, {\n    options: options,\n    width: width,\n    height: height\n  }) : null);\n}\n\nfunction ChartInner(_ref2) {\n  var _options2, _options$renderSVG;\n\n  var options = _ref2.options,\n      width = _ref2.width,\n      height = _ref2.height;\n\n  if (!options.primaryAxis) {\n    throw new Error('A primaryAxis is required');\n  }\n\n  if (!options.secondaryAxes.length) {\n    throw new Error('At least one secondaryAxis is required');\n  }\n\n  var primaryAxisOptions = React.useMemo(function () {\n    var firstValue = getFirstDefinedValue(options.primaryAxis, options.data);\n    var axisOptions = axisOptionsWithScaleType(options.primaryAxis, firstValue);\n    return _extends({\n      position: 'bottom'\n    }, axisOptions);\n  }, [options.data, options.primaryAxis]);\n  var secondaryAxesOptions = React.useMemo(function () {\n    return options.secondaryAxes.map(function (secondaryAxis, i) {\n      var firstValue = getFirstDefinedValue(secondaryAxis, options.data);\n      var axisOptions = axisOptionsWithScaleType(secondaryAxis, firstValue);\n\n      if (!axisOptions.elementType) {\n        if (primaryAxisOptions.scaleType === 'band') {\n          axisOptions.elementType = 'bar';\n        } else if (axisOptions.stacked) {\n          axisOptions.elementType = 'area';\n        }\n      }\n\n      if (typeof axisOptions.stacked === 'undefined' && axisOptions.elementType && ['area'].includes(axisOptions.elementType)) {\n        axisOptions.stacked = true;\n      }\n\n      return _extends({\n        position: !i ? 'left' : 'right'\n      }, axisOptions);\n    });\n  }, [options.data, options.secondaryAxes, primaryAxisOptions]); // Resolve Tooltip Option\n\n  var tooltipOptions = React.useMemo(function () {\n    var _options, _tooltipOptions$group;\n\n    var tooltipOptions = defaultTooltip((_options = options) == null ? void 0 : _options.tooltip);\n    tooltipOptions.groupingMode = (_tooltipOptions$group = tooltipOptions.groupingMode) != null ? _tooltipOptions$group : function () {\n      if (options.interactionMode === 'closest') {\n        return 'single';\n      }\n\n      return 'primary';\n    }();\n    return tooltipOptions;\n  }, [options.interactionMode, (_options2 = options) == null ? void 0 : _options2.tooltip]);\n  options = _extends({}, options, {\n    tooltip: tooltipOptions\n  }); //\n\n  var svgRef = React.useRef(null);\n  var getOptions = useGetLatest(_extends({}, options, {\n    tooltip: tooltipOptions\n  }));\n  var axisDimensionsState = React.useState({\n    left: {},\n    right: {},\n    top: {},\n    bottom: {}\n  });\n  var axisDimensions = axisDimensionsState[0];\n  var focusedDatumState = React.useState(null);\n  var focusedDatum = focusedDatumState[0]; // useAtom<Datum<TDatum> | null>(focusedDatumAtom)\n\n  var gridDimensions = React.useMemo(function () {\n    var _options$padding$left, _options$padding$righ, _options$padding$bott, _options$padding$top;\n\n    var padding = {\n      left: typeof options.padding === 'object' ? (_options$padding$left = options.padding.left) != null ? _options$padding$left : defaultPadding : options.padding,\n      right: typeof options.padding === 'object' ? (_options$padding$righ = options.padding.right) != null ? _options$padding$righ : defaultPadding : options.padding,\n      bottom: typeof options.padding === 'object' ? (_options$padding$bott = options.padding.bottom) != null ? _options$padding$bott : defaultPadding : options.padding,\n      top: typeof options.padding === 'object' ? (_options$padding$top = options.padding.top) != null ? _options$padding$top : defaultPadding : options.padding\n    };\n    var left = padding.left + Math.max(sum(Object.values(axisDimensions.left), function (d) {\n      return d.width;\n    }), sum(Object.values(axisDimensions.top), function (d) {\n      return d.paddingLeft;\n    }), sum(Object.values(axisDimensions.bottom), function (d) {\n      return d.paddingLeft;\n    }));\n    var top = padding.top + Math.max(sum(Object.values(axisDimensions.top), function (d) {\n      return d.height;\n    }), sum(Object.values(axisDimensions.left), function (d) {\n      return d.paddingTop;\n    }), sum(Object.values(axisDimensions.right), function (d) {\n      return d.paddingTop;\n    }));\n    var right = padding.right + Math.max(sum(Object.values(axisDimensions.right), function (d) {\n      return d.width;\n    }), sum(Object.values(axisDimensions.top), function (d) {\n      return d.paddingRight;\n    }), sum(Object.values(axisDimensions.bottom), function (d) {\n      return d.paddingRight;\n    }));\n    var bottom = padding.bottom + Math.max(sum(Object.values(axisDimensions.bottom), function (d) {\n      return d.height;\n    }), sum(Object.values(axisDimensions.left), function (d) {\n      return d.paddingBottom;\n    }), sum(Object.values(axisDimensions.right), function (d) {\n      return d.paddingBottom;\n    }));\n    var gridWidth = Math.max(0, width - left - right);\n    var gridHeight = Math.max(0, height - top - bottom);\n    return {\n      left: left,\n      top: top,\n      right: right,\n      bottom: bottom,\n      width: gridWidth,\n      height: gridHeight\n    };\n  }, [options.padding, axisDimensions.left, axisDimensions.top, axisDimensions.bottom, axisDimensions.right, width, height]);\n  var series = React.useMemo(function () {\n    var series = [];\n    var indicesByAxisId = {};\n\n    for (var seriesIndex = 0; seriesIndex < options.data.length; seriesIndex++) {\n      var _originalSeries$id, _originalSeries$label, _indicesByAxisId$;\n\n      var originalSeries = options.data[seriesIndex];\n      var seriesId = (_originalSeries$id = originalSeries.id) != null ? _originalSeries$id : seriesIndex + '';\n      var seriesLabel = (_originalSeries$label = originalSeries.label) != null ? _originalSeries$label : \"Series \" + (seriesIndex + 1);\n      var secondaryAxisId = originalSeries.secondaryAxisId;\n      var originalDatums = originalSeries.data;\n      var datums = [];\n      indicesByAxisId[\"\" + secondaryAxisId] = (_indicesByAxisId$ = indicesByAxisId[\"\" + secondaryAxisId]) != null ? _indicesByAxisId$ : 0;\n      var seriesIndexPerAxis = indicesByAxisId[\"\" + secondaryAxisId];\n      indicesByAxisId[\"\" + secondaryAxisId]++;\n\n      for (var datumIndex = 0; datumIndex < originalDatums.length; datumIndex++) {\n        var originalDatum = originalDatums[datumIndex];\n        datums[datumIndex] = {\n          originalSeries: originalSeries,\n          seriesIndex: seriesIndex,\n          seriesIndexPerAxis: seriesIndexPerAxis,\n          seriesId: seriesId,\n          seriesLabel: seriesLabel,\n          secondaryAxisId: secondaryAxisId,\n          index: datumIndex,\n          originalDatum: originalDatum\n        };\n      }\n\n      series[seriesIndex] = {\n        originalSeries: originalSeries,\n        index: seriesIndex,\n        id: seriesId,\n        label: seriesLabel,\n        indexPerAxis: seriesIndexPerAxis,\n        secondaryAxisId: secondaryAxisId,\n        datums: datums\n      };\n    }\n\n    return series;\n  }, [options.data]);\n  var allDatums = React.useMemo(function () {\n    return series.map(function (s) {\n      return s.datums;\n    }).flat(2);\n  }, [series]);\n  var primaryAxis = React.useMemo(function () {\n    return buildAxisLinear(true, primaryAxisOptions, series, allDatums, gridDimensions, width, height);\n  }, [allDatums, gridDimensions, height, primaryAxisOptions, series, width]);\n  var secondaryAxes = React.useMemo(function () {\n    return secondaryAxesOptions.map(function (secondaryAxis) {\n      return buildAxisLinear(false, secondaryAxis, series, allDatums, gridDimensions, width, height);\n    });\n  }, [allDatums, gridDimensions, height, secondaryAxesOptions, series, width]);\n\n  var _React$useMemo = React.useMemo(function () {\n    var datumsByInteractionGroup = new Map();\n    var datumsByTooltipGroup = new Map();\n\n    var getInteractionPrimary = function getInteractionPrimary(datum) {\n      if (secondaryAxes.every(function (d) {\n        return d.elementType === 'bar' && !d.stacked;\n      })) {\n        var secondaryAxis = secondaryAxes.find(function (d) {\n          return d.id === datum.secondaryAxisId;\n        });\n\n        if (secondaryAxis.elementType === 'bar' && !secondaryAxis.stacked) {\n          return getPrimary(datum, primaryAxis, secondaryAxis);\n        }\n      }\n\n      return datum.primaryValue;\n    };\n\n    var getInteractionKey = function getInteractionKey(datum) {\n      return \"\" + getInteractionPrimary(datum);\n    };\n\n    var getTooltipKey = function getTooltipKey(datum) {\n      return \"\" + datum.primaryValue;\n    };\n\n    if (options.interactionMode === 'closest') {\n      getInteractionKey = function getInteractionKey(datum) {\n        return getInteractionPrimary(datum) + \"_\" + datum.secondaryValue;\n      };\n    }\n\n    if (tooltipOptions.groupingMode === 'single') {\n      getTooltipKey = function getTooltipKey(datum) {\n        return datum.primaryValue + \"_\" + datum.secondaryValue;\n      };\n    } else if (tooltipOptions.groupingMode === 'secondary') {\n      getTooltipKey = function getTooltipKey(datum) {\n        return \"\" + datum.secondaryValue;\n      };\n    } else if (tooltipOptions.groupingMode === 'series') {\n      getTooltipKey = function getTooltipKey(datum) {\n        return \"\" + datum.seriesIndex;\n      };\n    }\n\n    allDatums.forEach(function (datum) {\n      var interactionKey = getInteractionKey(datum);\n      var tooltipKey = getTooltipKey(datum);\n\n      if (!datumsByInteractionGroup.has(interactionKey)) {\n        datumsByInteractionGroup.set(interactionKey, []);\n      }\n\n      if (!datumsByTooltipGroup.has(tooltipKey)) {\n        datumsByTooltipGroup.set(tooltipKey, []);\n      }\n\n      datumsByInteractionGroup.get(interactionKey).push(datum);\n      datumsByTooltipGroup.get(tooltipKey).push(datum);\n    });\n    datumsByInteractionGroup.forEach(function (value, key) {\n      datumsByInteractionGroup.set(key, sortDatumsBySecondaryPx(value, secondaryAxes));\n    });\n    datumsByTooltipGroup.forEach(function (value, key) {\n      datumsByTooltipGroup.set(key, sortDatumsBySecondaryPx(value, secondaryAxes));\n    });\n    allDatums.forEach(function (datum) {\n      var interactionKey = getInteractionKey(datum);\n      var tooltipKey = getTooltipKey(datum);\n      datum.interactiveGroup = datumsByInteractionGroup.get(interactionKey);\n      datum.tooltipGroup = datumsByTooltipGroup.get(tooltipKey);\n    });\n    return [datumsByInteractionGroup, datumsByTooltipGroup];\n  }, [allDatums, options.interactionMode, primaryAxis, secondaryAxes, tooltipOptions.groupingMode]),\n      datumsByInteractionGroup = _React$useMemo[0],\n      datumsByTooltipGroup = _React$useMemo[1];\n\n  var getSeriesStatusStyle = React.useCallback(function (series, focusedDatum) {\n    var _getOptions$getSeries, _getOptions$getSeries2, _getOptions;\n\n    var base = {\n      color: getOptions().defaultColors[series.index % getOptions().defaultColors.length]\n    };\n    var status = getSeriesStatus(series, focusedDatum);\n    var statusStyles = (_getOptions$getSeries = (_getOptions$getSeries2 = (_getOptions = getOptions()).getSeriesStyle) == null ? void 0 : _getOptions$getSeries2.call(_getOptions, series, status)) != null ? _getOptions$getSeries : {};\n    series.style = materializeStyles(statusStyles, base);\n    return series.style;\n  }, [getOptions]);\n  var getDatumStatusStyle = React.useCallback(function (datum, focusedDatum) {\n    var _series$datum$seriesI, _getOptions$getDatumS, _getOptions$getDatumS2, _getOptions2;\n\n    var base = _extends({}, (_series$datum$seriesI = series[datum.seriesIndex]) == null ? void 0 : _series$datum$seriesI.style, {\n      color: getOptions().defaultColors[datum.seriesIndex % getOptions().defaultColors.length]\n    });\n\n    var status = getDatumStatus(datum, focusedDatum);\n    var statusStyles = (_getOptions$getDatumS = (_getOptions$getDatumS2 = (_getOptions2 = getOptions()).getDatumStyle) == null ? void 0 : _getOptions$getDatumS2.call(_getOptions2, datum, status)) != null ? _getOptions$getDatumS : {};\n    datum.style = materializeStyles(statusStyles, base);\n    return datum.style;\n  }, [getOptions, series]); // Reverse the stack order for proper z-indexing\n\n  var orderedSeries = React.useMemo(function () {\n    var reversedSeries = [].concat(series).reverse();\n    return getOptions().getSeriesOrder(reversedSeries);\n  }, [getOptions, series]);\n  useIsomorphicLayoutEffect(function () {\n    if (svgRef.current && svgRef.current.parentElement && !svgRef.current.parentElement.style.position) {\n      svgRef.current.parentElement.style.position = 'relative';\n    }\n  });\n  var contextValue = {\n    getOptions: getOptions,\n    gridDimensions: gridDimensions,\n    primaryAxis: primaryAxis,\n    secondaryAxes: secondaryAxes,\n    series: series,\n    orderedSeries: orderedSeries,\n    datumsByInteractionGroup: datumsByInteractionGroup,\n    datumsByTooltipGroup: datumsByTooltipGroup,\n    width: width,\n    height: height,\n    getSeriesStatusStyle: getSeriesStatusStyle,\n    getDatumStatusStyle: getDatumStatusStyle,\n    axisDimensionsState: axisDimensionsState,\n    focusedDatumState: focusedDatumState,\n    svgRef: svgRef\n  };\n  var seriesByAxisId = React.useMemo(function () {\n    return sort(groups(orderedSeries, function (d) {\n      return d.secondaryAxisId;\n    }), function (_ref3) {\n      var key = _ref3[0];\n      return secondaryAxes.findIndex(function (axis) {\n        return axis.id === key;\n      });\n    });\n  }, [orderedSeries, secondaryAxes]); // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  var getSeriesInfo = function getSeriesInfo() {\n    return {\n      primaryAxis: primaryAxis,\n      secondaryAxes: secondaryAxes,\n      seriesByAxisId: seriesByAxisId\n    };\n  };\n\n  var getMemoizedSeriesInfo = React.useCallback(function () {\n    return {\n      primaryAxis: primaryAxis,\n      secondaryAxes: secondaryAxes,\n      seriesByAxisId: seriesByAxisId\n    };\n  }, [primaryAxis, secondaryAxes, seriesByAxisId]);\n\n  if (options.memoizeSeries) {\n    getSeriesInfo = getMemoizedSeriesInfo;\n  }\n\n  var seriesEl = React.useMemo(function () {\n    var _getSeriesInfo = getSeriesInfo(),\n        primaryAxis = _getSeriesInfo.primaryAxis,\n        secondaryAxes = _getSeriesInfo.secondaryAxes,\n        seriesByAxisId = _getSeriesInfo.seriesByAxisId;\n\n    return seriesByAxisId.map(function (_ref4) {\n      var axisId = _ref4[0],\n          series = _ref4[1];\n      var secondaryAxis = secondaryAxes.find(function (d) {\n        return d.id === axisId;\n      });\n\n      if (!secondaryAxis) {\n        return null;\n      }\n\n      var elementType = secondaryAxis.elementType;\n\n      var Component = function () {\n        if (elementType === 'line' || elementType === 'bubble' || elementType === 'area') {\n          return Line;\n        }\n\n        if (elementType === 'bar') {\n          return Bar;\n        }\n\n        throw new Error('Invalid elementType');\n      }();\n\n      if (primaryAxis.isInvalid || secondaryAxis.isInvalid) {\n        return null;\n      }\n\n      return /*#__PURE__*/React.createElement(Component, {\n        key: axisId != null ? axisId : '__default__',\n        primaryAxis: primaryAxis,\n        secondaryAxis: secondaryAxis,\n        series: series\n      });\n    });\n  }, [getSeriesInfo]);\n  return /*#__PURE__*/React.createElement(ChartContextProvider, {\n    value: useGetLatest(contextValue)\n  }, /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"svg\", {\n    ref: svgRef,\n    style: {\n      width: width,\n      height: height,\n      overflow: options.brush ? 'hidden' : 'visible'\n    },\n    onClick: function onClick(e) {\n      return options.onClickDatum == null ? void 0 : options.onClickDatum(focusedDatum, e);\n    }\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    className: \"axes\"\n  }, [primaryAxis].concat(secondaryAxes).map(function (axis) {\n    return /*#__PURE__*/React.createElement(AxisLinear, _extends({\n      key: [axis.position, axis.id].join('')\n    }, axis));\n  })), /*#__PURE__*/React.createElement(\"g\", {\n    className: \"Series\",\n    style: {\n      pointerEvents: 'none'\n    }\n  }, seriesEl), /*#__PURE__*/React.createElement(Voronoi, null), (_options$renderSVG = options.renderSVG == null ? void 0 : options.renderSVG()) != null ? _options$renderSVG : null), /*#__PURE__*/React.createElement(Cursors, null), /*#__PURE__*/React.createElement(Tooltip, null)));\n}\n\nfunction getFirstDefinedValue(options, data) {\n  var firstDefinedValue;\n  data.some(function (serie) {\n    return serie.data.some(function (originalDatum) {\n      var value = options.getValue(originalDatum);\n\n      if (value !== null && typeof value !== 'undefined') {\n        firstDefinedValue = value;\n        return true;\n      }\n    });\n  });\n  return firstDefinedValue;\n}\n\nfunction axisOptionsWithScaleType(options, firstValue) {\n  var scaleType = options.scaleType;\n\n  if (!options.scaleType) {\n    if (typeof firstValue === 'number') {\n      scaleType = 'linear';\n    } else if (typeof (firstValue == null ? void 0 : firstValue.getMonth) === 'function') {\n      scaleType = 'time';\n    } else if (typeof firstValue === 'string' || typeof firstValue === 'boolean') {\n      scaleType = 'band';\n    } else {\n      throw new Error('Invalid scale type: Unable to infer type from data');\n    }\n  }\n\n  return _extends({}, options, {\n    scaleType: scaleType\n  });\n}\n\nfunction sortDatumsBySecondaryPx(datums, secondaryAxes) {\n  return [].concat(datums).sort(function (a, b) {\n    var _aAxis$scale, _a$stackData, _bAxis$scale, _b$stackData;\n\n    var aAxis = secondaryAxes.find(function (d) {\n      return d.id === a.secondaryAxisId;\n    });\n    var bAxis = secondaryAxes.find(function (d) {\n      return d.id === b.secondaryAxisId;\n    });\n    var aPx = (_aAxis$scale = aAxis == null ? void 0 : aAxis.scale(aAxis.stacked ? (_a$stackData = a.stackData) == null ? void 0 : _a$stackData[1] : a.secondaryValue)) != null ? _aAxis$scale : NaN;\n    var bPx = (_bAxis$scale = bAxis == null ? void 0 : bAxis.scale(bAxis.stacked ? (_b$stackData = b.stackData) == null ? void 0 : _b$stackData[1] : b.secondaryValue)) != null ? _bAxis$scale : NaN;\n    return aPx - bPx;\n  });\n}","map":{"version":3,"sources":["/home/ralph1/Documents/3rd_year/software_eng/react/github_visaulisation/node_modules/react-charts/es/components/Chart.js"],"names":["_createForOfIteratorHelperLoose","_objectWithoutPropertiesLoose","_extends","_excluded","groups","sort","sum","React","useGetLatest","useIsomorphicLayoutEffect","Bar","getPrimary","Line","materializeStyles","getSeriesStatus","getDatumStatus","buildAxisLinear","ChartContextProvider","AxisLinear","Cursors","Tooltip","defaultTooltip","Voronoi","defaultColorScheme","defaultPadding","defaultChartOptions","options","_options$initialWidth","_options$initialHeigh","_options$getSeriesOrd","_options$interactionM","_options$showVoronoi","_options$defaultColor","_options$useIntersect","_options$intersection","_options$primaryCurso","_options$secondaryCur","_options$padding","initialWidth","initialHeight","getSeriesOrder","series","interactionMode","showVoronoi","defaultColors","useIntersectionObserver","intersectionObserverRootMargin","primaryCursor","secondaryCursor","padding","Chart","_ref","userOptions","className","_ref$style","style","rest","_React$useState","useState","chartElement","setContainerElement","containerEl","parentElement","nearestScrollableParent","useMemo","run","el","grandParent","scrollHeight","clientHeight","_window$getComputedSt","window","getComputedStyle","overflow","includes","_React$useState2","width","height","_React$useState2$","setDims","computed","position","useEffect","observer","ResizeObserver","rect","getBoundingClientRect","styles","parseInt","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth","observe","unobserve","_React$useState3","isIntersecting","setIsIntersecting","IntersectionObserver","entries","_iterator","_step","done","entry","value","root","rootMargin","createElement","ref","fontFamily","ChartInner","_ref2","_options2","_options$renderSVG","primaryAxis","Error","secondaryAxes","length","primaryAxisOptions","firstValue","getFirstDefinedValue","data","axisOptions","axisOptionsWithScaleType","secondaryAxesOptions","map","secondaryAxis","i","elementType","scaleType","stacked","tooltipOptions","_options","_tooltipOptions$group","tooltip","groupingMode","svgRef","useRef","getOptions","axisDimensionsState","left","right","top","bottom","axisDimensions","focusedDatumState","focusedDatum","gridDimensions","_options$padding$left","_options$padding$righ","_options$padding$bott","_options$padding$top","Math","max","Object","values","d","paddingLeft","paddingTop","paddingRight","paddingBottom","gridWidth","gridHeight","indicesByAxisId","seriesIndex","_originalSeries$id","_originalSeries$label","_indicesByAxisId$","originalSeries","seriesId","id","seriesLabel","label","secondaryAxisId","originalDatums","datums","seriesIndexPerAxis","datumIndex","originalDatum","index","indexPerAxis","allDatums","s","flat","_React$useMemo","datumsByInteractionGroup","Map","datumsByTooltipGroup","getInteractionPrimary","datum","every","find","primaryValue","getInteractionKey","getTooltipKey","secondaryValue","forEach","interactionKey","tooltipKey","has","set","get","push","key","sortDatumsBySecondaryPx","interactiveGroup","tooltipGroup","getSeriesStatusStyle","useCallback","_getOptions$getSeries","_getOptions$getSeries2","_getOptions","base","color","status","statusStyles","getSeriesStyle","call","getDatumStatusStyle","_series$datum$seriesI","_getOptions$getDatumS","_getOptions$getDatumS2","_getOptions2","getDatumStyle","orderedSeries","reversedSeries","concat","reverse","current","contextValue","seriesByAxisId","_ref3","findIndex","axis","getSeriesInfo","getMemoizedSeriesInfo","memoizeSeries","seriesEl","_getSeriesInfo","_ref4","axisId","Component","isInvalid","brush","onClick","e","onClickDatum","join","pointerEvents","renderSVG","firstDefinedValue","some","serie","getValue","getMonth","a","b","_aAxis$scale","_a$stackData","_bAxis$scale","_b$stackData","aAxis","bAxis","aPx","scale","stackData","NaN","bPx"],"mappings":"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","sourcesContent":["import _createForOfIteratorHelperLoose from \"@babel/runtime/helpers/esm/createForOfIteratorHelperLoose\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nvar _excluded = [\"options\", \"className\", \"style\"];\nimport { groups, sort, sum } from 'd3-array';\nimport React from 'react';\nimport useGetLatest from '../hooks/useGetLatest';\nimport useIsomorphicLayoutEffect from '../hooks/useIsomorphicLayoutEffect';\nimport Bar, { getPrimary } from '../seriesTypes/Bar';\nimport Line from '../seriesTypes/Line'; //\n\nimport { materializeStyles, getSeriesStatus, getDatumStatus } from '../utils/Utils';\nimport buildAxisLinear from '../utils/buildAxis.linear';\nimport { ChartContextProvider } from '../utils/chartContext';\nimport AxisLinear from './AxisLinear'; // import Brush from './Brush'\n\nimport Cursors from './Cursors';\nimport Tooltip, { defaultTooltip } from './Tooltip';\nimport Voronoi from './Voronoi'; //\n//\n\nvar defaultColorScheme = ['#0f83ab', '#faa43a', '#fd6868', '#53cfc9', '#a2d925', '#decf3f', '#734fe9', '#cd82ad', '#006d92', '#de7c00', '#f33232', '#3f9a80', '#53c200', '#d7af00', '#4c26c9', '#d44d99'];\nvar defaultPadding = 5;\n\nfunction defaultChartOptions(options) {\n  var _options$initialWidth, _options$initialHeigh, _options$getSeriesOrd, _options$interactionM, _options$showVoronoi, _options$defaultColor, _options$useIntersect, _options$intersection, _options$primaryCurso, _options$secondaryCur, _options$padding;\n\n  return _extends({}, options, {\n    initialWidth: (_options$initialWidth = options.initialWidth) != null ? _options$initialWidth : 300,\n    initialHeight: (_options$initialHeigh = options.initialHeight) != null ? _options$initialHeigh : 200,\n    getSeriesOrder: (_options$getSeriesOrd = options.getSeriesOrder) != null ? _options$getSeriesOrd : function (series) {\n      return series;\n    },\n    interactionMode: (_options$interactionM = options.interactionMode) != null ? _options$interactionM : 'primary',\n    showVoronoi: (_options$showVoronoi = options.showVoronoi) != null ? _options$showVoronoi : false,\n    defaultColors: (_options$defaultColor = options.defaultColors) != null ? _options$defaultColor : defaultColorScheme,\n    useIntersectionObserver: (_options$useIntersect = options.useIntersectionObserver) != null ? _options$useIntersect : true,\n    intersectionObserverRootMargin: (_options$intersection = options.intersectionObserverRootMargin) != null ? _options$intersection : '1000px',\n    primaryCursor: (_options$primaryCurso = options.primaryCursor) != null ? _options$primaryCurso : true,\n    secondaryCursor: (_options$secondaryCur = options.secondaryCursor) != null ? _options$secondaryCur : true,\n    padding: (_options$padding = options.padding) != null ? _options$padding : defaultPadding\n  });\n}\n\nexport function Chart(_ref) {\n  var userOptions = _ref.options,\n      className = _ref.className,\n      _ref$style = _ref.style,\n      style = _ref$style === void 0 ? {} : _ref$style,\n      rest = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  var options = defaultChartOptions(userOptions);\n\n  var _React$useState = React.useState(null),\n      chartElement = _React$useState[0],\n      setContainerElement = _React$useState[1];\n\n  var containerEl = chartElement == null ? void 0 : chartElement.parentElement;\n  var nearestScrollableParent = React.useMemo(function () {\n    var run = function run(el) {\n      if (!el) {\n        return null;\n      }\n\n      var grandParent = el.parentElement;\n\n      if (!grandParent) {\n        return null;\n      }\n\n      if (grandParent.scrollHeight > grandParent.clientHeight) {\n        var _window$getComputedSt = window.getComputedStyle(grandParent),\n            overflow = _window$getComputedSt.overflow;\n\n        if (overflow.includes('scroll') || overflow.includes('auto')) {\n          return grandParent;\n        }\n      }\n\n      return run(grandParent);\n    };\n\n    return run(containerEl);\n  }, [containerEl]);\n\n  var _React$useState2 = React.useState({\n    width: options.initialWidth,\n    height: options.initialHeight\n  }),\n      _React$useState2$ = _React$useState2[0],\n      width = _React$useState2$.width,\n      height = _React$useState2$.height,\n      setDims = _React$useState2[1];\n\n  useIsomorphicLayoutEffect(function () {\n    if (containerEl) {\n      var computed = window.getComputedStyle(containerEl);\n\n      if (!['relative', 'absolute', 'fixed'].includes(computed.position)) {\n        containerEl.style.position = 'relative';\n      }\n    }\n  }, [containerEl]);\n  React.useEffect(function () {\n    if (!containerEl) {\n      return;\n    }\n\n    var observer = new ResizeObserver(function () {\n      var rect = containerEl == null ? void 0 : containerEl.getBoundingClientRect();\n      var styles = window.getComputedStyle(containerEl);\n\n      if (rect) {\n        setDims({\n          width: rect.width - parseInt(styles.borderLeftWidth) - parseInt(styles.borderRightWidth),\n          height: rect.height - parseInt(styles.borderTopWidth) - parseInt(styles.borderBottomWidth)\n        });\n      }\n    });\n    observer.observe(containerEl);\n    return function () {\n      observer.unobserve(containerEl);\n    };\n  }, [containerEl]);\n\n  var _React$useState3 = React.useState(true),\n      isIntersecting = _React$useState3[0],\n      setIsIntersecting = _React$useState3[1];\n\n  React.useEffect(function () {\n    if (!containerEl || !options.useIntersectionObserver) return;\n    var observer = new IntersectionObserver(function (entries) {\n      for (var _iterator = _createForOfIteratorHelperLoose(entries), _step; !(_step = _iterator()).done;) {\n        var entry = _step.value;\n\n        if (entry.isIntersecting) {\n          setIsIntersecting(true);\n        } else {\n          setIsIntersecting(false);\n        }\n      }\n    }, {\n      root: nearestScrollableParent,\n      rootMargin: options.intersectionObserverRootMargin\n    });\n    observer.observe(containerEl);\n    return function () {\n      observer.unobserve(containerEl);\n    };\n  }, [containerEl, nearestScrollableParent, options.intersectionObserverRootMargin, options.useIntersectionObserver]);\n  return /*#__PURE__*/React.createElement(\"div\", _extends({\n    ref: setContainerElement\n  }, rest, {\n    className: \"ReactChart \" + (className || ''),\n    style: _extends({\n      fontFamily: 'sans-serif'\n    }, style, {\n      position: 'absolute',\n      width: width,\n      height: height\n    })\n  }), isIntersecting ? /*#__PURE__*/React.createElement(ChartInner, {\n    options: options,\n    width: width,\n    height: height\n  }) : null);\n}\n\nfunction ChartInner(_ref2) {\n  var _options2, _options$renderSVG;\n\n  var options = _ref2.options,\n      width = _ref2.width,\n      height = _ref2.height;\n\n  if (!options.primaryAxis) {\n    throw new Error('A primaryAxis is required');\n  }\n\n  if (!options.secondaryAxes.length) {\n    throw new Error('At least one secondaryAxis is required');\n  }\n\n  var primaryAxisOptions = React.useMemo(function () {\n    var firstValue = getFirstDefinedValue(options.primaryAxis, options.data);\n    var axisOptions = axisOptionsWithScaleType(options.primaryAxis, firstValue);\n    return _extends({\n      position: 'bottom'\n    }, axisOptions);\n  }, [options.data, options.primaryAxis]);\n  var secondaryAxesOptions = React.useMemo(function () {\n    return options.secondaryAxes.map(function (secondaryAxis, i) {\n      var firstValue = getFirstDefinedValue(secondaryAxis, options.data);\n      var axisOptions = axisOptionsWithScaleType(secondaryAxis, firstValue);\n\n      if (!axisOptions.elementType) {\n        if (primaryAxisOptions.scaleType === 'band') {\n          axisOptions.elementType = 'bar';\n        } else if (axisOptions.stacked) {\n          axisOptions.elementType = 'area';\n        }\n      }\n\n      if (typeof axisOptions.stacked === 'undefined' && axisOptions.elementType && ['area'].includes(axisOptions.elementType)) {\n        axisOptions.stacked = true;\n      }\n\n      return _extends({\n        position: !i ? 'left' : 'right'\n      }, axisOptions);\n    });\n  }, [options.data, options.secondaryAxes, primaryAxisOptions]); // Resolve Tooltip Option\n\n  var tooltipOptions = React.useMemo(function () {\n    var _options, _tooltipOptions$group;\n\n    var tooltipOptions = defaultTooltip((_options = options) == null ? void 0 : _options.tooltip);\n    tooltipOptions.groupingMode = (_tooltipOptions$group = tooltipOptions.groupingMode) != null ? _tooltipOptions$group : function () {\n      if (options.interactionMode === 'closest') {\n        return 'single';\n      }\n\n      return 'primary';\n    }();\n    return tooltipOptions;\n  }, [options.interactionMode, (_options2 = options) == null ? void 0 : _options2.tooltip]);\n  options = _extends({}, options, {\n    tooltip: tooltipOptions\n  }); //\n\n  var svgRef = React.useRef(null);\n  var getOptions = useGetLatest(_extends({}, options, {\n    tooltip: tooltipOptions\n  }));\n  var axisDimensionsState = React.useState({\n    left: {},\n    right: {},\n    top: {},\n    bottom: {}\n  });\n  var axisDimensions = axisDimensionsState[0];\n  var focusedDatumState = React.useState(null);\n  var focusedDatum = focusedDatumState[0]; // useAtom<Datum<TDatum> | null>(focusedDatumAtom)\n\n  var gridDimensions = React.useMemo(function () {\n    var _options$padding$left, _options$padding$righ, _options$padding$bott, _options$padding$top;\n\n    var padding = {\n      left: typeof options.padding === 'object' ? (_options$padding$left = options.padding.left) != null ? _options$padding$left : defaultPadding : options.padding,\n      right: typeof options.padding === 'object' ? (_options$padding$righ = options.padding.right) != null ? _options$padding$righ : defaultPadding : options.padding,\n      bottom: typeof options.padding === 'object' ? (_options$padding$bott = options.padding.bottom) != null ? _options$padding$bott : defaultPadding : options.padding,\n      top: typeof options.padding === 'object' ? (_options$padding$top = options.padding.top) != null ? _options$padding$top : defaultPadding : options.padding\n    };\n    var left = padding.left + Math.max(sum(Object.values(axisDimensions.left), function (d) {\n      return d.width;\n    }), sum(Object.values(axisDimensions.top), function (d) {\n      return d.paddingLeft;\n    }), sum(Object.values(axisDimensions.bottom), function (d) {\n      return d.paddingLeft;\n    }));\n    var top = padding.top + Math.max(sum(Object.values(axisDimensions.top), function (d) {\n      return d.height;\n    }), sum(Object.values(axisDimensions.left), function (d) {\n      return d.paddingTop;\n    }), sum(Object.values(axisDimensions.right), function (d) {\n      return d.paddingTop;\n    }));\n    var right = padding.right + Math.max(sum(Object.values(axisDimensions.right), function (d) {\n      return d.width;\n    }), sum(Object.values(axisDimensions.top), function (d) {\n      return d.paddingRight;\n    }), sum(Object.values(axisDimensions.bottom), function (d) {\n      return d.paddingRight;\n    }));\n    var bottom = padding.bottom + Math.max(sum(Object.values(axisDimensions.bottom), function (d) {\n      return d.height;\n    }), sum(Object.values(axisDimensions.left), function (d) {\n      return d.paddingBottom;\n    }), sum(Object.values(axisDimensions.right), function (d) {\n      return d.paddingBottom;\n    }));\n    var gridWidth = Math.max(0, width - left - right);\n    var gridHeight = Math.max(0, height - top - bottom);\n    return {\n      left: left,\n      top: top,\n      right: right,\n      bottom: bottom,\n      width: gridWidth,\n      height: gridHeight\n    };\n  }, [options.padding, axisDimensions.left, axisDimensions.top, axisDimensions.bottom, axisDimensions.right, width, height]);\n  var series = React.useMemo(function () {\n    var series = [];\n    var indicesByAxisId = {};\n\n    for (var seriesIndex = 0; seriesIndex < options.data.length; seriesIndex++) {\n      var _originalSeries$id, _originalSeries$label, _indicesByAxisId$;\n\n      var originalSeries = options.data[seriesIndex];\n      var seriesId = (_originalSeries$id = originalSeries.id) != null ? _originalSeries$id : seriesIndex + '';\n      var seriesLabel = (_originalSeries$label = originalSeries.label) != null ? _originalSeries$label : \"Series \" + (seriesIndex + 1);\n      var secondaryAxisId = originalSeries.secondaryAxisId;\n      var originalDatums = originalSeries.data;\n      var datums = [];\n      indicesByAxisId[\"\" + secondaryAxisId] = (_indicesByAxisId$ = indicesByAxisId[\"\" + secondaryAxisId]) != null ? _indicesByAxisId$ : 0;\n      var seriesIndexPerAxis = indicesByAxisId[\"\" + secondaryAxisId];\n      indicesByAxisId[\"\" + secondaryAxisId]++;\n\n      for (var datumIndex = 0; datumIndex < originalDatums.length; datumIndex++) {\n        var originalDatum = originalDatums[datumIndex];\n        datums[datumIndex] = {\n          originalSeries: originalSeries,\n          seriesIndex: seriesIndex,\n          seriesIndexPerAxis: seriesIndexPerAxis,\n          seriesId: seriesId,\n          seriesLabel: seriesLabel,\n          secondaryAxisId: secondaryAxisId,\n          index: datumIndex,\n          originalDatum: originalDatum\n        };\n      }\n\n      series[seriesIndex] = {\n        originalSeries: originalSeries,\n        index: seriesIndex,\n        id: seriesId,\n        label: seriesLabel,\n        indexPerAxis: seriesIndexPerAxis,\n        secondaryAxisId: secondaryAxisId,\n        datums: datums\n      };\n    }\n\n    return series;\n  }, [options.data]);\n  var allDatums = React.useMemo(function () {\n    return series.map(function (s) {\n      return s.datums;\n    }).flat(2);\n  }, [series]);\n  var primaryAxis = React.useMemo(function () {\n    return buildAxisLinear(true, primaryAxisOptions, series, allDatums, gridDimensions, width, height);\n  }, [allDatums, gridDimensions, height, primaryAxisOptions, series, width]);\n  var secondaryAxes = React.useMemo(function () {\n    return secondaryAxesOptions.map(function (secondaryAxis) {\n      return buildAxisLinear(false, secondaryAxis, series, allDatums, gridDimensions, width, height);\n    });\n  }, [allDatums, gridDimensions, height, secondaryAxesOptions, series, width]);\n\n  var _React$useMemo = React.useMemo(function () {\n    var datumsByInteractionGroup = new Map();\n    var datumsByTooltipGroup = new Map();\n\n    var getInteractionPrimary = function getInteractionPrimary(datum) {\n      if (secondaryAxes.every(function (d) {\n        return d.elementType === 'bar' && !d.stacked;\n      })) {\n        var secondaryAxis = secondaryAxes.find(function (d) {\n          return d.id === datum.secondaryAxisId;\n        });\n\n        if (secondaryAxis.elementType === 'bar' && !secondaryAxis.stacked) {\n          return getPrimary(datum, primaryAxis, secondaryAxis);\n        }\n      }\n\n      return datum.primaryValue;\n    };\n\n    var getInteractionKey = function getInteractionKey(datum) {\n      return \"\" + getInteractionPrimary(datum);\n    };\n\n    var getTooltipKey = function getTooltipKey(datum) {\n      return \"\" + datum.primaryValue;\n    };\n\n    if (options.interactionMode === 'closest') {\n      getInteractionKey = function getInteractionKey(datum) {\n        return getInteractionPrimary(datum) + \"_\" + datum.secondaryValue;\n      };\n    }\n\n    if (tooltipOptions.groupingMode === 'single') {\n      getTooltipKey = function getTooltipKey(datum) {\n        return datum.primaryValue + \"_\" + datum.secondaryValue;\n      };\n    } else if (tooltipOptions.groupingMode === 'secondary') {\n      getTooltipKey = function getTooltipKey(datum) {\n        return \"\" + datum.secondaryValue;\n      };\n    } else if (tooltipOptions.groupingMode === 'series') {\n      getTooltipKey = function getTooltipKey(datum) {\n        return \"\" + datum.seriesIndex;\n      };\n    }\n\n    allDatums.forEach(function (datum) {\n      var interactionKey = getInteractionKey(datum);\n      var tooltipKey = getTooltipKey(datum);\n\n      if (!datumsByInteractionGroup.has(interactionKey)) {\n        datumsByInteractionGroup.set(interactionKey, []);\n      }\n\n      if (!datumsByTooltipGroup.has(tooltipKey)) {\n        datumsByTooltipGroup.set(tooltipKey, []);\n      }\n\n      datumsByInteractionGroup.get(interactionKey).push(datum);\n      datumsByTooltipGroup.get(tooltipKey).push(datum);\n    });\n    datumsByInteractionGroup.forEach(function (value, key) {\n      datumsByInteractionGroup.set(key, sortDatumsBySecondaryPx(value, secondaryAxes));\n    });\n    datumsByTooltipGroup.forEach(function (value, key) {\n      datumsByTooltipGroup.set(key, sortDatumsBySecondaryPx(value, secondaryAxes));\n    });\n    allDatums.forEach(function (datum) {\n      var interactionKey = getInteractionKey(datum);\n      var tooltipKey = getTooltipKey(datum);\n      datum.interactiveGroup = datumsByInteractionGroup.get(interactionKey);\n      datum.tooltipGroup = datumsByTooltipGroup.get(tooltipKey);\n    });\n    return [datumsByInteractionGroup, datumsByTooltipGroup];\n  }, [allDatums, options.interactionMode, primaryAxis, secondaryAxes, tooltipOptions.groupingMode]),\n      datumsByInteractionGroup = _React$useMemo[0],\n      datumsByTooltipGroup = _React$useMemo[1];\n\n  var getSeriesStatusStyle = React.useCallback(function (series, focusedDatum) {\n    var _getOptions$getSeries, _getOptions$getSeries2, _getOptions;\n\n    var base = {\n      color: getOptions().defaultColors[series.index % getOptions().defaultColors.length]\n    };\n    var status = getSeriesStatus(series, focusedDatum);\n    var statusStyles = (_getOptions$getSeries = (_getOptions$getSeries2 = (_getOptions = getOptions()).getSeriesStyle) == null ? void 0 : _getOptions$getSeries2.call(_getOptions, series, status)) != null ? _getOptions$getSeries : {};\n    series.style = materializeStyles(statusStyles, base);\n    return series.style;\n  }, [getOptions]);\n  var getDatumStatusStyle = React.useCallback(function (datum, focusedDatum) {\n    var _series$datum$seriesI, _getOptions$getDatumS, _getOptions$getDatumS2, _getOptions2;\n\n    var base = _extends({}, (_series$datum$seriesI = series[datum.seriesIndex]) == null ? void 0 : _series$datum$seriesI.style, {\n      color: getOptions().defaultColors[datum.seriesIndex % getOptions().defaultColors.length]\n    });\n\n    var status = getDatumStatus(datum, focusedDatum);\n    var statusStyles = (_getOptions$getDatumS = (_getOptions$getDatumS2 = (_getOptions2 = getOptions()).getDatumStyle) == null ? void 0 : _getOptions$getDatumS2.call(_getOptions2, datum, status)) != null ? _getOptions$getDatumS : {};\n    datum.style = materializeStyles(statusStyles, base);\n    return datum.style;\n  }, [getOptions, series]); // Reverse the stack order for proper z-indexing\n\n  var orderedSeries = React.useMemo(function () {\n    var reversedSeries = [].concat(series).reverse();\n    return getOptions().getSeriesOrder(reversedSeries);\n  }, [getOptions, series]);\n  useIsomorphicLayoutEffect(function () {\n    if (svgRef.current && svgRef.current.parentElement && !svgRef.current.parentElement.style.position) {\n      svgRef.current.parentElement.style.position = 'relative';\n    }\n  });\n  var contextValue = {\n    getOptions: getOptions,\n    gridDimensions: gridDimensions,\n    primaryAxis: primaryAxis,\n    secondaryAxes: secondaryAxes,\n    series: series,\n    orderedSeries: orderedSeries,\n    datumsByInteractionGroup: datumsByInteractionGroup,\n    datumsByTooltipGroup: datumsByTooltipGroup,\n    width: width,\n    height: height,\n    getSeriesStatusStyle: getSeriesStatusStyle,\n    getDatumStatusStyle: getDatumStatusStyle,\n    axisDimensionsState: axisDimensionsState,\n    focusedDatumState: focusedDatumState,\n    svgRef: svgRef\n  };\n  var seriesByAxisId = React.useMemo(function () {\n    return sort(groups(orderedSeries, function (d) {\n      return d.secondaryAxisId;\n    }), function (_ref3) {\n      var key = _ref3[0];\n      return secondaryAxes.findIndex(function (axis) {\n        return axis.id === key;\n      });\n    });\n  }, [orderedSeries, secondaryAxes]); // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  var getSeriesInfo = function getSeriesInfo() {\n    return {\n      primaryAxis: primaryAxis,\n      secondaryAxes: secondaryAxes,\n      seriesByAxisId: seriesByAxisId\n    };\n  };\n\n  var getMemoizedSeriesInfo = React.useCallback(function () {\n    return {\n      primaryAxis: primaryAxis,\n      secondaryAxes: secondaryAxes,\n      seriesByAxisId: seriesByAxisId\n    };\n  }, [primaryAxis, secondaryAxes, seriesByAxisId]);\n\n  if (options.memoizeSeries) {\n    getSeriesInfo = getMemoizedSeriesInfo;\n  }\n\n  var seriesEl = React.useMemo(function () {\n    var _getSeriesInfo = getSeriesInfo(),\n        primaryAxis = _getSeriesInfo.primaryAxis,\n        secondaryAxes = _getSeriesInfo.secondaryAxes,\n        seriesByAxisId = _getSeriesInfo.seriesByAxisId;\n\n    return seriesByAxisId.map(function (_ref4) {\n      var axisId = _ref4[0],\n          series = _ref4[1];\n      var secondaryAxis = secondaryAxes.find(function (d) {\n        return d.id === axisId;\n      });\n\n      if (!secondaryAxis) {\n        return null;\n      }\n\n      var elementType = secondaryAxis.elementType;\n\n      var Component = function () {\n        if (elementType === 'line' || elementType === 'bubble' || elementType === 'area') {\n          return Line;\n        }\n\n        if (elementType === 'bar') {\n          return Bar;\n        }\n\n        throw new Error('Invalid elementType');\n      }();\n\n      if (primaryAxis.isInvalid || secondaryAxis.isInvalid) {\n        return null;\n      }\n\n      return /*#__PURE__*/React.createElement(Component, {\n        key: axisId != null ? axisId : '__default__',\n        primaryAxis: primaryAxis,\n        secondaryAxis: secondaryAxis,\n        series: series\n      });\n    });\n  }, [getSeriesInfo]);\n  return /*#__PURE__*/React.createElement(ChartContextProvider, {\n    value: useGetLatest(contextValue)\n  }, /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"svg\", {\n    ref: svgRef,\n    style: {\n      width: width,\n      height: height,\n      overflow: options.brush ? 'hidden' : 'visible'\n    },\n    onClick: function onClick(e) {\n      return options.onClickDatum == null ? void 0 : options.onClickDatum(focusedDatum, e);\n    }\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    className: \"axes\"\n  }, [primaryAxis].concat(secondaryAxes).map(function (axis) {\n    return /*#__PURE__*/React.createElement(AxisLinear, _extends({\n      key: [axis.position, axis.id].join('')\n    }, axis));\n  })), /*#__PURE__*/React.createElement(\"g\", {\n    className: \"Series\",\n    style: {\n      pointerEvents: 'none'\n    }\n  }, seriesEl), /*#__PURE__*/React.createElement(Voronoi, null), (_options$renderSVG = options.renderSVG == null ? void 0 : options.renderSVG()) != null ? _options$renderSVG : null), /*#__PURE__*/React.createElement(Cursors, null), /*#__PURE__*/React.createElement(Tooltip, null)));\n}\n\nfunction getFirstDefinedValue(options, data) {\n  var firstDefinedValue;\n  data.some(function (serie) {\n    return serie.data.some(function (originalDatum) {\n      var value = options.getValue(originalDatum);\n\n      if (value !== null && typeof value !== 'undefined') {\n        firstDefinedValue = value;\n        return true;\n      }\n    });\n  });\n  return firstDefinedValue;\n}\n\nfunction axisOptionsWithScaleType(options, firstValue) {\n  var scaleType = options.scaleType;\n\n  if (!options.scaleType) {\n    if (typeof firstValue === 'number') {\n      scaleType = 'linear';\n    } else if (typeof (firstValue == null ? void 0 : firstValue.getMonth) === 'function') {\n      scaleType = 'time';\n    } else if (typeof firstValue === 'string' || typeof firstValue === 'boolean') {\n      scaleType = 'band';\n    } else {\n      throw new Error('Invalid scale type: Unable to infer type from data');\n    }\n  }\n\n  return _extends({}, options, {\n    scaleType: scaleType\n  });\n}\n\nfunction sortDatumsBySecondaryPx(datums, secondaryAxes) {\n  return [].concat(datums).sort(function (a, b) {\n    var _aAxis$scale, _a$stackData, _bAxis$scale, _b$stackData;\n\n    var aAxis = secondaryAxes.find(function (d) {\n      return d.id === a.secondaryAxisId;\n    });\n    var bAxis = secondaryAxes.find(function (d) {\n      return d.id === b.secondaryAxisId;\n    });\n    var aPx = (_aAxis$scale = aAxis == null ? void 0 : aAxis.scale(aAxis.stacked ? (_a$stackData = a.stackData) == null ? void 0 : _a$stackData[1] : a.secondaryValue)) != null ? _aAxis$scale : NaN;\n    var bPx = (_bAxis$scale = bAxis == null ? void 0 : bAxis.scale(bAxis.stacked ? (_b$stackData = b.stackData) == null ? void 0 : _b$stackData[1] : b.secondaryValue)) != null ? _bAxis$scale : NaN;\n    return aPx - bPx;\n  });\n}"]},"metadata":{},"sourceType":"module"}